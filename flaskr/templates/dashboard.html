{% extends "layout.html" %}



{% block title %}
	<link rel="stylesheet" type="text/css" href="{{url_for('static' , filename = 'css/dashboard.css' )}}">
{% endblock title%}

{% block content %}
	<div class="container-fluid top_cards">
		<div class="row">
			<div  class=" card col-xs-12 col-sm-6 col-md-6 col-lg-3">
				<div class="card-body expand_it" id="total_earning_card_body">
					<h5>Total Earning..</h5>
					<h3>Rs. {{card['credit']}}</h3>
				</div>
			</div>
			<div  class=" card col-xs-12 col-sm-6 col-md-6 col-lg-3">
				<div class="card-body expand_it" id="total_expence_card_body">
					<h5>Total Expense..</h5>
					<h3>Rs. {{card['debit']}}</h3>
				</div>
			</div>
			<div  class=" card col-xs-12 col-sm-6 col-md-6 col-lg-3">
				<div class="card-body expand_it" id="total_savings_card_body">
					<h5>Total Savings..</h5>
					<h3>Rs. {{card['saving']}}</h3>
				</div>
			</div>
			<div  class=" card col-xs-12 col-sm-6 col-md-6 col-lg-3">
				<div class="card-body expand_it" id="last_savings_card_body">
						<h5>Last Month Saving..</h5>
						<h3>Rs. {{card['last_month_saving']}}</h3>
				</div>
			</div>
		</div>
	</div><br>




	<div class="container-fluid ">
		<div class="row">
			<div class="table-responsive col-lg-10 col-md-12 col-sm-12">
				<table class="table table-striped table-hover " id="main_table">
					<thead class="thead-dark">
					    <tr>
					    	<th></th>
					    	<th scope="col">Expense Name</th>
					        <th scope="col">Date</th>
					        <th scope="col">Time</th>
					        <th scope="col">Type</th>
					        <th scope="col">Sub-Type</th>
					        <th scope="col">Frequency</th>
					        <th scope="col">Debit</th>
					        <th scope="col">Credit</th>
					        <th scope="col">Payment Method</th>
					        <th scope="col">Comments</th>
					 	</tr>
					</thead>
					<tbody class="text-right">
						{% for row in table %}
							<tr id="{{row['id']}}">
								<th><a href="/edit_expence/{{row['id']}}"><button class="btn btn-sm btn-danger">Edit</button></a></th>
								<th>{{ row['name'] }}</th>
								<th>{{ row['date'] }}</th>
								<th>{{ row['time'] }}</th>
								<th>{{ row['type'] }}</th>
								<th>{{ row['subtype'] }}</th>
								<th>{{ row['frequency'] }}</th>


								{% if row['debit'] == 0 %}
									<th> </th>
								{% else %}
									<th>{{ row['debit'] }}</th>
								{% endif %}


								{% if row['credit'] == 0 %}
									<th> </th>
								{% else %}
									<th>{{ row['credit'] }}</th>
								{% endif %}


								<th>{{ row['payment_method'] }}</th>


								{% if row['comment'] %}
									<th>{{ row['comment'][0:10] }}...</th>
								{% else %}
									<th></th>
								{% endif %}


							</tr>
						{% endfor %}
					</tbody>
				</table>
				<button type="button" class="btn btn-info"  onclick="load_more_table()">Load More</button><br>
			</div>
			<div class="side_btns col-lg-2 col-md-6 col-sm-12 container-fluid align-middle">
				<div class="card  col-lg-12 col-md-12 col-sm-6 col-xs-12">
					<div  class="card-body" id="creat_card">
						<h5>Add new entry...</h5>
						<a href="/add_expence" class="btn btn-success">Create</a>
					</div>
				</div>
				<div class="card  col-lg-12 col-md-12 col-sm-6 col-xs-12">
					<div class="card-body">
						<h5>KharchaKhata Android App</h5>
						<a type="button" class="btn btn-success" href="/android">Download</a>
					</div>
				</div>

			</div>
		</div>
	</div>
{% endblock content%}


{% block script %}
	<script type="text/javascript" src="{{ url_for('static' , filename = 'js/dashboard.js' ) }}"></script>
{% endblock script %}