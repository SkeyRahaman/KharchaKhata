{% extends "layout.html" %}
{% block title %}
	<link rel="stylesheet" type="text/css" href="{{url_for('static' , filename = 'css/settings.css' )}}">
{% endblock title %}


{% block content %}


	<nav class="navbar navbar-expand-lg navbar-light bg-light">
	    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
	            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="navbar-toggler-icon"></span>
	    </button>
	    <div class="collapse navbar-collapse" id="navbarNav">
	        <ul class="navbar-nav">
	            <li class="nav-item">
	                <a class="nav-link" href="/dashboard/all/all" ><strong>Dashboard</strong></a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link"><strong>Charts</strong></a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link" href="/my_account"><strong>My Account</strong></a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link" href="/about"><strong>About</strong></a>
	            </li>
	            <li class="nav-item active">
	                <a class="nav-link" style="font-size: 22px;"><strong>Settings</strong></a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link" href="/logout"><strong>Logout</strong></a>
	            </li>
	        </ul>
	    </div>
	</nav>


	<div class="container-fluid">
		<div class="row">
			<div class="settings_nav col-sm-2 col-xs-12 col-md-2 col-lg-2">
				<button type="button" class="btn btn-light ">Reset password</button>
			</div>
			<div class="settings_feild col-sm-10 col-xs-12 col-md-10 col-lg-10">
				<div class="settings_feild_elements bg-light" id="reset_password_div">
					<form method="post" action="/password_validation">

						<div class="notice" >
							<small class="password_not_match"><strong>{{notice}}</strong></small><br>
						</div>


						<label for="cpassword"><strong>Current Password:-</strong></label>
						<div class="container-fluid row">
							<div class="col-11">
								<input class="form-control" type="password" name="cpassword" id="cpassword_input">
							</div>
							<div class="col-1">
								<label class="btn btn-light" id="cpassword_show">SHOW</label>
							</div>
						</div>




						<label for="npassword"><strong>New Password:-</strong></label>
						
						<div class="container-fluid row">
							<div class="col-11">
								<input class="form-control" type="password" name="npassword" id="npassword_input" >
							</div>
							<div class="col-1">
								<label class="btn btn-light" id="npassword_show">SHOW</label>
							</div>
						</div>




						<label for="cnpassword"><strong>Conform New Password:-</strong></label>

						<div class="container-fluid row">
							<div class="col-11">
								<input class="form-control" type="password" name="cnpassword" id="cnpassword_input">
							</div>
							<div class="col-1">
								<label class="btn btn-light" id="cnpassword_show">SHOW</label>
							</div>
						</div>


						


						<button class="btn btn-success float-right" type="submit" id="save_pasword_button"  onclick="save_button()">Save</button><br>
					</form>
				</div>
			</div>
		</div>
	</div>

{% endblock content %}


{% block script %}
	<script>
		cpassword_change = 0
		npassword_change = 0
		cnpassword_change = 0

		function password_show(id,change){

			doc = document.getElementById(id)

			if(change === 0) {

				doc.setAttribute('type', 'text');
				change = 1;
			}
			else if(change === 1) {
				doc.setAttribute('type', 'password');
				change = 0;
			}
			return change;
		}

		document.getElementById("cpassword_show").addEventListener("click" , function() {
			cpassword_change = password_show("cpassword_input",cpassword_change)
		});
		document.getElementById("npassword_show").addEventListener("click" , function() {
			npassword_change = password_show("npassword_input",npassword_change)
		});
		document.getElementById("cnpassword_show").addEventListener("click" , function() {
			cnpassword_change = password_show("cnpassword_input",cnpassword_change)
		});
		// document.getElementById("save_pasword_button").addEventListener("click", function(){
		// 	console.log("im in");
		// 	npassword = document.getElementById("npassword_input");
		// 	cnpassword = document.getElementById("cnpassword_input");
		// 	if (npassword.value.length !== cnpassword.value.length) {
		// 		alert("Password Doesnot match!!")
		// 	}
		// } );

		function save_button(){
			npassword = document.getElementById("npassword_input");
			cnpassword = document.getElementById("cnpassword_input");
			if ((npassword.value.length >= 5 ) && (cnpassword.value.length >= 5)) {
				if (npassword.value.length !== cnpassword.value.length) {
					alert("Password Doesnot match!!")
				}
			}
			else {
				alert("New Password Should be minimum of 6 charecter.")
			}
		};
	</script>
{% endblock script %}
